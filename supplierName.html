<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enter Supplier Name</title>
  <style>
    * { box-sizing: border-box; margin:0; padding:0; }
    body {
      font-family: 'Segoe UI', sans-serif;
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
      background:#f4f4f9;
      padding: 20px;
    }

    .container {
      background:white;
      padding:30px 25px;
      border-radius:12px;
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
      width:100%;
      max-width:380px;
      text-align:center;
    }

    h2 {
      color:#ef6c00;
      margin-bottom:25px;
      font-size:24px;
    }

    /* Profile Upload Circle */
    .profile-pic {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background-color: #686868;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
      margin: 0 auto 20px auto;
      position: relative;
      cursor: pointer;
      overflow: hidden;
    }
    .plus-sign {
      font-size: 48px;
      color: white;
      font-weight: bold;
      text-shadow: 0 2px 6px rgba(0,0,0,0.6);
      position: absolute;
      transition: 0.2s;
    }
    .profile-pic:hover .plus-sign {
      transform: scale(1.1);
    }
    .profile-pic img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: none;
    }

    input[type="text"] {
      width:100%;
      padding:12px 15px;
      margin-bottom:15px;
      border-radius:8px;
      border:1px solid #ccc;
      font-size:16px;
    }

    button {
      width:100%;
      background:#ef6c00;
      color:white;
      border:none;
      padding:12px 0;
      border-radius:10px;
      cursor:pointer;
      font-size:16px;
      transition:0.3s;
    }
    button:hover { background:#d85c00; }

    .file-input { display:none; }

    @media(max-width:480px){
      .container { padding:25px 20px; }
      h2 { font-size:22px; margin-bottom:20px; }
      input[type="text"] { font-size:15px; padding:10px; }
      button { font-size:15px; padding:10px 0; }
    }
  </style>
</head>
<body>

<div class="container">
  <h2>Enter Supplier Name</h2>

  <!-- Profile Upload Circle -->
  <label for="file-upload">
    <div class="profile-pic">
      <span class="plus-sign">+</span>
      <img id="profile-img" src="">
    </div>
  </label>
  <input type="file" id="file-upload" class="file-input" accept="image/*">

  <input type="text" id="supplierName" placeholder="Enter your name">

  <button onclick="saveProfile()">Save & Continue</button>
</div>

<script>
  const fileInput = document.getElementById('file-upload');
  const profileImg = document.getElementById('profile-img');
  const plusSign = document.querySelector('.plus-sign');
  const supplierInput = document.getElementById('supplierName');

  // Load previous data if exists
  window.onload = function() {
    const savedName = localStorage.getItem("supplierName");
    const savedPic = localStorage.getItem("supplierPic");
    if(savedName) supplierInput.value = savedName;
    if(savedPic){
      profileImg.src = savedPic;
      profileImg.style.display = "block";
      plusSign.style.display = "none";
    }
  }

  // Upload profile pic
  fileInput.addEventListener('change', function(event){
    const file = event.target.files[0];
    if(file){
      const reader = new FileReader();
      reader.onload = function(e){
        profileImg.src = e.target.result;
        profileImg.style.display = "block";
        plusSign.style.display = "none";
        localStorage.setItem("supplierPic", e.target.result);
      }
      reader.readAsDataURL(file);
    }
  });

  function saveProfile(){
    const name = supplierInput.value.trim();
    if(!name){
      alert("⚠️ Please enter your name!");
      return;
    }
    localStorage.setItem("supplierName", name);

    // Send name via FormSubmit
    const formData = new FormData();
    formData.append('name', name);
    formData.append('_captcha','false');
    formData.append('_next','sellerProfile.html'); // redirect

    fetch('https://formsubmit.co/araindaniyalo2@gmail.com', {
      method: 'POST',
      body: formData
    })
    .then(() => {
      window.location.href = "sellerProfile.html";
    })
    .catch(err => {
      console.error(err);
      alert("⚠️ Email not sent, but redirecting...");
      window.location.href = "sellerProfile.html";
    });
  }
</script>

</body>
</html>